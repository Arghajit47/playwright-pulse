
# Playwright Pulse Reporter & Dashboard

This project provides both a custom Playwright reporter and a Next.js web dashboard to visualize your Playwright test results.

## How it Works

1.  **Reporter (`playwright-pulse-reporter.ts`):** A custom reporter that collects detailed results during your Playwright test run.
2.  **JSON Output:** On completion (`onEnd`), the reporter writes all collected data into a `playwright-pulse-report.json` file in your project's specified output directory (defaults to the root).
3.  **Next.js Dashboard (This App):** A web application built with Next.js that reads the `playwright-pulse-report.json` file and presents the test results in a user-friendly dashboard interface.

## Setup

### 1. Install the Reporter

In your Playwright project (the one containing your tests), install this package:

```bash
npm install playwright-pulse-reporter --save-dev
# or
yarn add playwright-pulse-reporter --dev
# or
pnpm add playwright-pulse-reporter --save-dev
```

### 2. Configure Playwright

In your `playwright.config.ts` (or `.js`) file, add the custom reporter to the `reporter` array:

```typescript
// playwright.config.ts
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  // ... other configurations
  reporter: [
    ['list'], // Keep other reporters like 'list' or 'html' if desired
    ['playwright-pulse-reporter', {
        // Optional: Specify output file name and directory
        // outputFile: 'my-custom-report-name.json',
        // outputDir: './test-results/pulse-reports' // Relative to project root
    }]
  ],
  // ... other configurations
});
```

### 3. Run Your Tests

Execute your Playwright tests as usual:

```bash
npx playwright test
```

This will run your tests and, upon completion, the `playwright-pulse-reporter` will generate the `playwright-pulse-report.json` file (or your custom configured path).

### 4. View the Dashboard

Now, you need to run the Next.js dashboard application *from the directory where this project (playwright-pulse-reporter) is located*.

First, ensure dependencies are installed:

```bash
# Navigate to the playwright-pulse-reporter directory
cd path/to/playwright-pulse-reporter

npm install
# or yarn install or pnpm install
```

Then, start the development server:

```bash
npm run dev
# or yarn dev or pnpm dev
```

This will start the Next.js dashboard application (usually on `http://localhost:9002`).

**Important:** The Next.js dashboard reads the `playwright-pulse-report.json` file from its *own* root directory.

*   **If you installed the reporter via npm:** You might need to copy the generated `playwright-pulse-report.json` from your main Playwright project's output directory into the root of the `node_modules/playwright-pulse-reporter` directory before running `npm run dev` there.
*   **If you cloned this repository directly:** Run `npm run dev` within the cloned directory. Ensure the `playwright-pulse-report.json` generated by your tests is placed in the root of this cloned directory.

Alternatively, build and start the production server:

```bash
npm run build
npm run start
```

## Development (Contributing to this Project)

To work on the reporter or the dashboard itself:

1.  **Clone the repository:**
    ```bash
    git clone <repository-url>
    cd playwright-pulse-reporter
    ```
2.  **Install dependencies:**
    ```bash
    npm install
    ```
3.  **Build the reporter:**
    ```bash
    npm run build:reporter
    ```
4.  **Run the dashboard in development mode:**
    ```bash
    npm run dev
    ```
    *(You'll need a sample `playwright-pulse-report.json` in the root for the dashboard to display data).*

## Key Files

*   `src/reporter/playwright-pulse-reporter.ts`: The core Playwright reporter logic.
*   `src/lib/data.ts`: Data fetching logic for the Next.js app (reads the JSON file).
*   `src/app/`: Contains the Next.js dashboard pages and components.
*   `playwright-pulse-report.json`: (Generated by the reporter in your test project) The data source for the dashboard.
